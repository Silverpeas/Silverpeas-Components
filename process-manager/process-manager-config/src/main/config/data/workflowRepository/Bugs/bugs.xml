<?xml version="1.0" encoding="ISO-8859-1"?>
<!--

    Copyright (C) 2000 - 2009 Silverpeas

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    As a special exception to the terms and conditions of version 3.0 of
    the GPL, you may redistribute this Program in connection with Free/Libre
    Open Source Software ("FLOSS") applications as described in Silverpeas's
    FLOSS exception.  You should have recieved a copy of the text describing
    the FLOSS exception, and it is also available here:
    "http://repository.silverpeas.com/legal/licensing"

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.

-->
<processModel name="WorkflowBugs" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="C:\Silverpeas\KMEdition\Bus\workflowEngine\Others\processModel.xsd">
	<label>Bugs SilverPeas</label>
	<description>Gestion des Bugs SilverPeas avec roles.</description>
	<!-- ....................................................................... DESCRIPTION DES ROLES -->
	<roles>
		<role name="Booter">
			<label>Demandeur</label>
			<description>Personne pouvant emettre un nouveau bug.</description>
		</role>
		<role name="Qualifieur">
			<label>Qualifieur</label>
			<description>Personne pouvant qualifier un bug.</description>
		</role>
		<role name="Developpeur">
			<label>Développeur</label>
				<description>Personne chargée de corriger le bug.</description>
		</role>
	</roles>
	<!-- ............................................................ DESCRIPTION DES PRESENTATIONS -->
	<presentation>
		<title role="Booter">Demande du ${action.Creation.date}</title>
		<title role="Qualifieur">Demande du ${action.Creation.date}</title>
		<title role="Developpeur">Demande du ${action.Creation.date}</title>
		<title role="Valideur">Demande du ${action.Creation.date}</title>
		<title></title>

		<columns role="Booter">
			<column item="composant"/>
			<column item="titre"/>
			<column item="priorite"/>
		</columns>
		<columns role="Qualifieur">
			<column item="composant"/>
			<column item="titre"/>
			<column item="priorite"/>
		</columns>
		<columns role="Developpeur">
			<column item="composant"/>
			<column item="titre"/>
			<column item="priorite"/>
		</columns>
	</presentation>
	<!-- ................................................................ DESCRIPTION DES PARTICIPANTS -->
	<participants>
		<participant name="Emetteur" state="" role="Booter">
			<label>Emetteur du bug.</label>
			<description>Personne à l'origine de la fiche de bug.</description>
		</participant>
		<participant name="Qualificateur" state="" role="Qualifieur">
			<label>Qualifieur du bug.</label>
			<description>Personne qui a qualifié le bug.</description>
		</participant>
	</participants>
	<!-- ...................................................................... DESCRIPTION DES ÉTATS -->
	<states>
		<state name="EnQualification">
			<label>Qualification</label>
			<description>Qualification du bug</description>
			<workingUsers role="Qualifieur">
				<userInRole name="Qualifieur"/>
			</workingUsers>
			<interestedUsers>
				<relatedUser participant="Emetteur" role="Booter"/>				
			</interestedUsers>
			<allowedActions>
				<allow action="Qualification"/>
				<allow action="Amelioration"/>
				<allow action="Terminaison"/>
			</allowedActions>
		</state>
		<state name="EnResolution">
			<label>Résolution</label>
			<description>Résolution du bug</description>
			<workingUsers role="Developpeur">
				<relatedUser folderItem="programmeur"/>
			</workingUsers>
			<interestedUsers>
				<relatedUser participant="Emetteur" role="Booter"/>
				<relatedUser participant="Qualificateur" role="Qualifieur"/>
			</interestedUsers>
			<allowedActions>
				<allow action="Resolution"/>
			</allowedActions>
		</state>
		<state name="EnValidation">
			<label>Validation - Terminaison</label>
			<description>Validation - Terminaison du bug</description>
			<workingUsers role="Booter">
				<relatedUser participant="Emetteur"/>
			</workingUsers>
			<interestedUsers>
				<relatedUser participant="Qualificateur" role="Qualifieur"/>
				<relatedUser folderItem="resolveur" role="Developpeur"/>
			</interestedUsers>
			<allowedActions>
				<allow action="Cloture"/>
			</allowedActions>
		</state>
		<state name="Clos">
			<label>Clos</label>
			<description>Bug résolu et clos</description>
			<workingUsers role="Booter">
			</workingUsers>
			<interestedUsers>
				<userInRole name="Qualifieur"/>
			</interestedUsers>
			<allowedActions>
				<allow action="Supression"/>
			</allowedActions>
		</state>
	</states>
	<!-- .................................................................... DESCRIPTION DES ACTIONS -->
	<actions>
		<action name="Creation" form="creation" kind="create">
			<label>Creation de bug</label>
			<description>Nouveau Bug.</description>
			<allowedUsers>
				<userInRole name="Booter"/>
			</allowedUsers>
			<consequences>
				<set state="EnQualification"/>
			</consequences>
		</action>
		<action name="Amelioration" form="amelioration">
			<label>Amelioration</label>
			<description>Amelioration du descriptif du bug.</description>
			<allowedUsers>
				<userInRole name="Qualifieur"/>
			</allowedUsers>
			<consequences>
				<set state="EnQualification"/>
			</consequences>
		</action>
		<action name="Qualification" form="qualification">
			<label>Qualification</label>
			<description>Le bug est qualifié et un développeur est assigné pour la résolution.</description>
			<allowedUsers>
				<userInRole name="Qualifieur"/>
			</allowedUsers>
			<consequences>
				<set state="EnResolution"/>
			</consequences>
		</action>
		<action name="Resolution" form="resolution">
			<label>Résolution</label>
			<description>Le développeur a résolu le bug et le retourne à l'émetteur.</description>
			<allowedUsers>
				<userInRole name="Developpeur"/>
			</allowedUsers>
			<consequences>
				<set state="EnValidation"/>
			</consequences>
		</action>
		<action name="Terminaison" form="terminaison">
			<label>Terminaison</label>
			<description>Le bug n'est pas pertinent ou a déjà été résolu.</description>
			<allowedUsers>
				<userInRole name="Qualifieur"/>
			</allowedUsers>
			<consequences>
				<set state="EnValidation"/>
			</consequences>
		</action>
		<action name="Cloture" form="cloture">
			<label>Clôture</label>
			<description>Clôture du bug.</description>
			<allowedUsers>
				<userInRole name="Booter"/>
			</allowedUsers>
			<consequences>
				<set state="Clos"/>
			</consequences>
		</action>
	</actions>
	<!-- ................................................................DEFINITION DES DONNEES UTILISATEUR -->
	<userInfos>
		<item name="fonction">
			<label>Fonction</label>
			<description>Fonction occupée</description>
			<type>text</type>
		</item>
	</userInfos>
	<!-- .......................................................................DEFINITION DU DOSSIER -->
	<dataFolder>
		<item name="composant">
			<label>Composant</label>
			<description>Le composant dans lequel un bug a été constaté</description>
			<type>text</type>
		</item>
		<item name="titre">
			<label>Titre</label>
			<description>Le titre du bug</description>
			<type>text</type>
		</item>
		<item name="description">
			<label>Description</label>
			<description>Description du bug</description>
			<type>text</type>
		</item>
		<item name="reproductible">
			<label>Reproductible</label>
			<description>Le bug est-il reproductible ?</description>
			<type>text</type>
			<param name="keys" value="Oui##Non"/>
			<param name="cols" value="2"/>
		</item>
		<item name="priorite">
			<label>Priorité (1-3)</label>
			<description>Priorité de résolution. (Priorité 3 étant la plus forte)</description>
			<type>text</type>
			<param name="keys" value="1##2##3"/>
			<param name="values" value="1 - faible##2 - moyenne##3 - forte"/>
		</item>
		<item name="programmeur">
			<label>Programmeur</label>
			<description>Programmeur désigné pour la résolution du bug</description>
			<type>user</type>
		</item>
		<item name="commentaireQualifieur">
			<label>Commentaires qualifieur</label>
			<description>Commentaires éventuels du qualifieur</description>
			<type>text</type>
		</item>
		<item name="commentaireResolution">
			<label>Commentaires résolution</label>
			<description>Commentaires éventuels sur la résolution</description>
			<type>text</type>
		</item>
		<item name="commentaireTerminaison">
			<label>Commentaires terminaison</label>
			<description>Commentaires éventuels sur la terminaison</description>
			<type>text</type>
		</item>
	</dataFolder>
	<!-- ..................................................................DEFINITION DES FORMULAIRES -->
	<forms>
		<!-- .....................................................Formulaire d'impression -->
		<form name="printForm" HTMLFileName="/weblib/processManager/Bugs/printForm/Bugs_print.html">
		</form>
		<!-- .....................................................Formulaire de création -->
		<form name="creation">
			<title>Création d'une fiche de bug</title>
			<input item="composant" mandatory="true"/>
			<input item="titre" mandatory="true"/>
			<input item="description" displayerName="textarea"/>
			<input item="reproductible" displayerName="radio"/>
			<input item="priorite" displayerName="checkbox" mandatory="true"/>
		</form>
		<form name="amelioration">
			<title>Complétion d'une fiche de bug</title>
			<input item="composant" mandatory="true"/>
			<input item="titre" mandatory="true"/>
			<input item="description" displayerName="textarea"/>
			<input item="reproductible" displayerName="radio"/>
			<input item="priorite" displayerName="listbox"/>
		</form>
		<form name="qualification">
			<title>Qualification du bug</title>
			<input item="composant" readonly="true"/>
			<input item="programmeur" mandatory="true"/>
			<input item="commentaireQualifieur" displayerName="textarea"/>
			<input item="reproductible" displayerName="radio" readonly="true"/>
			<input item="priorite" readonly="true" displayerName="listbox"/>
		</form>
		<form name="resolution">
			<title>Résolution du bug</title>
			<input item="commentaireResolution" displayerName="textarea"/>
		</form>
		<form name="terminaison">
			<title>Terminaison du bug</title>
			<input item="commentaireTerminaison" displayerName="textarea"/>
		</form>
		<form name="cloture">
			<title>Cloture du bug</title>
		</form>
	</forms>
</processModel>
